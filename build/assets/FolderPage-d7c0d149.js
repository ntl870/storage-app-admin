import{r as b,A as je,_ as X,i as be,k as Vt,a as u,j as x,F as fe,T as F,l as ct,m as pe,n as W,o as me,p as he,B as te,q as Jt,s as Wt,t as Xt,v as Gt,w as Kt,x as Qt,y as Ue,D as ut,z as Yt,E as Je,G as Zt,H as er,I as tr,L as rr,J as nr,K as sr,u as or,M as ir,N as lr,O as ar,R as cr,C as De,P as ur,Q as We,S as Xe,U as dr}from"./index-18d7895e.js";import{M as Ge}from"./index-8250cea1.js";import{S as _e,F as dt,D as fr}from"./index-5b4eb152.js";import{m as Ke}from"./index-aa80ddb7.js";import{D as ft}from"./index-98871ce0.js";import{S as pr,F as mr}from"./FileSection-119a6d23.js";import{S as hr,F as gr}from"./FolderSection-8fc5df3c.js";import{S as br}from"./index-7cc5df03.js";import{a as yr,b as wr}from"./index.es-f03b9607.js";import{P as Sr}from"./PlusOutlined-b8473fb8.js";import"./index-9ad78b7b.js";import"./FileCard-f728ac1b.js";import"./styled-components.browser.esm-08fa7367.js";import"./DeleteOutlined-725f5558.js";var xr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM632 577c0 3.8-3.4 7-7.5 7H540v84.9c0 3.9-3.2 7.1-7 7.1h-42c-3.8 0-7-3.2-7-7.1V584h-84.5c-4.1 0-7.5-3.2-7.5-7v-42c0-3.8 3.4-7 7.5-7H484v-84.9c0-3.9 3.2-7.1 7-7.1h42c3.8 0 7 3.2 7 7.1V528h84.5c4.1 0 7.5 3.2 7.5 7v42z"}}]},name:"folder-add",theme:"filled"};const Fr=xr;var pt=function(t,r){return b.createElement(je,X(X({},t),{},{ref:r,icon:Fr}))};pt.displayName="FolderAddFilled";const Or=b.forwardRef(pt);var Er={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"}}]},name:"folder-open",theme:"filled"};const Nr=Er;var mt=function(t,r){return b.createElement(je,X(X({},t),{},{ref:r,icon:Nr}))};mt.displayName="FolderOpenFilled";const Dr=b.forwardRef(mt);var Rr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const Tr=Rr;var ht=function(t,r){return b.createElement(je,X(X({},t),{},{ref:r,icon:Tr}))};ht.displayName="UploadOutlined";const Ar=b.forwardRef(ht),Cr=({fileID:e})=>{var c,p,a;const{navigate:t}=be(),[r,s]=b.useState(!1),{data:n,loading:o}=Vt({variables:{fileID:e||""},skip:!e,fetchPolicy:"cache-and-network"}),i=()=>{s(!0)};return o?u("div",{className:"flex justify-center items-center h-full bg-white rounded-xl mr-6",children:u(_e,{size:"large"})}):x(fe,{children:[x("div",{className:"flex flex-col p-4 bg-white rounded-xl mr-6",children:[x("div",{className:"flex justify-center items-center flex-col",children:[u(F.Title,{level:5,children:n==null?void 0:n.getFileDetail.name}),(n==null?void 0:n.getFileDetail)&&ct(n==null?void 0:n.getFileDetail)]}),x("div",{children:[u(F.Title,{level:5,className:"text-left",children:"Who has access"}),x("div",{className:"flex flex-col",children:[u(F.Text,{className:"font-bold",children:"Owner"}),(n==null?void 0:n.getFileDetail.owner)&&u(pe,{title:`${n==null?void 0:n.getFileDetail.owner.name} - ${n==null?void 0:n.getFileDetail.owner.email}`,children:u(W,{src:n!=null&&n.getFileDetail.owner.avatar?me(n==null?void 0:n.getFileDetail.owner.avatar):he(n==null?void 0:n.getFileDetail.owner.ID)})})]}),!!((c=n==null?void 0:n.getFileDetail.sharedUsers)!=null&&c.length)&&x("div",{className:"mt-4 flex flex-col",children:[u(F.Text,{className:"font-bold",children:"People with access"}),u(W.Group,{children:(p=n==null?void 0:n.getFileDetail.sharedUsers)==null?void 0:p.map(d=>u(pe,{title:`${d.name} - ${d.email}`,children:u(W,{src:d.avatar?me(d.avatar):he(d.ID)})},d.ID))})]}),u(te,{className:"mt-4",onClick:i,children:"Manage Access"})]}),u(ft,{}),x("div",{children:[u(F.Text,{className:"font-bold",children:"File details"}),x("div",{className:"flex flex-col mt-2",children:[u(F.Text,{className:"text-xs font-bold",children:"Type"}),u(F.Text,{className:"text-sm",children:n==null?void 0:n.getFileDetail.fileType})]}),x("div",{className:"flex flex-col mt-2",children:[u(F.Text,{className:"text-xs font-bold",children:"Size"}),u(F.Text,{className:"text-sm",children:Jt((n==null?void 0:n.getFileDetail.fileSize)||0)})]}),u("div",{className:"flex flex-col mt-2",children:u(F.Text,{className:"text-xs font-bold mt-2",children:"Location"})}),x(te,{className:"mt-1",onClick:()=>t(`/folder/${n==null?void 0:n.getFileDetail.ID}`),children:[u(dt,{}),u("span",{children:(a=n==null?void 0:n.getFileDetail.folder)==null?void 0:a.name})]}),x("div",{className:"flex flex-col mt-2",children:[u(F.Text,{className:"text-xs font-bold",children:"Created Date"}),u(F.Text,{className:"text-sm",children:new Date((n==null?void 0:n.getFileDetail.createdDate)||"").toLocaleString("en-US")})]}),x("div",{className:"flex flex-col mt-2",children:[u(F.Text,{className:"text-xs font-bold",children:"Modified Date"}),u(F.Text,{className:"text-sm",children:new Date((n==null?void 0:n.getFileDetail.modifiedDate)||"").toLocaleString("en-US")})]})]})]}),r&&u(pr,{file:n==null?void 0:n.getFileDetail,open:r,handleClose:()=>s(!1)})]})};function Pr({children:e,handleDropFile:t,className:r}){return u("div",{onDragEnter:c=>{c.preventDefault()},onDragLeave:c=>{c.preventDefault()},onDragOver:c=>{c.preventDefault()},onDrop:c=>{c.preventDefault(),t(c)},className:r,children:e})}const vr=({folderID:e})=>{var c,p,a;const{navigate:t}=be(),[r,s]=b.useState(!1),{data:n,loading:o}=Wt({variables:{folderID:e||""},skip:!e,fetchPolicy:"cache-and-network"}),i=()=>{s(!0)};return o?u("div",{className:"flex justify-center items-center h-full bg-white rounded-xl mr-6",children:u(_e,{size:"large"})}):x(fe,{children:[x("div",{className:"flex flex-col p-4 bg-white rounded-xl mr-6",children:[x("div",{className:"flex justify-center items-center flex-col",children:[u(F.Title,{level:5,children:n==null?void 0:n.getFolderDetail.name}),(n==null?void 0:n.getFolderDetail)&&ct(n==null?void 0:n.getFolderDetail)]}),x("div",{children:[u(F.Title,{level:5,className:"text-left",children:"Who has access"}),x("div",{className:"flex flex-col",children:[u(F.Text,{className:"font-bold",children:"Owner"}),(n==null?void 0:n.getFolderDetail.owner)&&u(pe,{title:`${n==null?void 0:n.getFolderDetail.owner.name} - ${n==null?void 0:n.getFolderDetail.owner.email}`,children:u(W,{src:n!=null&&n.getFolderDetail.owner.avatar?me(n==null?void 0:n.getFolderDetail.owner.avatar):he(n==null?void 0:n.getFolderDetail.owner.ID)})})]}),!!((c=n==null?void 0:n.getFolderDetail.sharedUsers)!=null&&c.length)&&x("div",{className:"mt-4 flex flex-col",children:[u(F.Text,{className:"font-bold",children:"People with access"}),u(W.Group,{children:(p=n==null?void 0:n.getFolderDetail.sharedUsers)==null?void 0:p.map(d=>u(pe,{title:`${d.name} - ${d.email}`,children:u(W,{src:d.avatar?me(d.avatar):he(d.ID)})},d.ID))})]}),u(te,{className:"mt-4",onClick:i,children:"Manage Access"})]}),u(ft,{}),x("div",{children:[u(F.Text,{className:"font-bold",children:"File details"}),u("div",{className:"flex flex-col mt-2 max-w-[10rem]",children:u(F.Text,{className:"text-xs font-bold",children:"Location"})}),x(te,{className:"mt-1",onClick:()=>t(`/folder/${n==null?void 0:n.getFolderDetail.ID}`),children:[u(dt,{}),u("span",{children:(a=n==null?void 0:n.getFolderDetail.rootFolder)==null?void 0:a.name})]}),x("div",{className:"flex flex-col mt-2",children:[u(F.Text,{className:"text-xs font-bold",children:"Created Date"}),u(F.Text,{className:"text-sm",children:new Date((n==null?void 0:n.getFolderDetail.createdDate)||"").toLocaleString("en-US")})]}),x("div",{className:"flex flex-col mt-2",children:[u(F.Text,{className:"text-xs font-bold",children:"Modified Date"}),u(F.Text,{className:"text-sm",children:new Date((n==null?void 0:n.getFolderDetail.modifiedDate)||"").toLocaleString("en-US")})]})]})]}),r&&u(hr,{folder:n==null?void 0:n.getFolderDetail,open:r,handleClose:()=>s(!1)})]})},Br=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:Object.assign(Object.assign({},Kt(e)),{color:e.breadcrumbBaseColor,fontSize:e.breadcrumbFontSize,[r]:{fontSize:e.breadcrumbIconFontSize},ol:{display:"flex",flexWrap:"wrap",margin:0,padding:0,listStyle:"none"},a:Object.assign({color:e.breadcrumbLinkColor,transition:`color ${e.motionDurationMid}`,padding:`0 ${e.paddingXXS}px`,borderRadius:e.borderRadiusSM,height:e.lineHeight*e.fontSize,display:"inline-block",marginInline:-e.marginXXS,"&:hover":{color:e.breadcrumbLinkColorHover,backgroundColor:e.colorBgTextHover}},Qt(e)),["li:last-child"]:{color:e.breadcrumbLastItemColor},[`${t}-separator`]:{marginInline:e.breadcrumbSeparatorMargin,color:e.breadcrumbSeparatorColor},[`${t}-link`]:{[`
          > ${r} + span,
          > ${r} + a
        `]:{marginInlineStart:e.marginXXS}},[`${t}-overlay-link`]:{borderRadius:e.borderRadiusSM,height:e.lineHeight*e.fontSize,display:"inline-block",padding:`0 ${e.paddingXXS}px`,marginInline:-e.marginXXS,[`> ${r}`]:{marginInlineStart:e.marginXXS,fontSize:e.fontSizeIcon},"&:hover":{color:e.breadcrumbLinkColorHover,backgroundColor:e.colorBgTextHover,a:{color:e.breadcrumbLinkColorHover}},a:{"&:hover":{backgroundColor:"transparent"}}},[`&${e.componentCls}-rtl`]:{direction:"rtl"}})}},Ir=Xt("Breadcrumb",e=>{const t=Gt(e,{breadcrumbBaseColor:e.colorTextDescription,breadcrumbFontSize:e.fontSize,breadcrumbIconFontSize:e.fontSize,breadcrumbLinkColor:e.colorTextDescription,breadcrumbLinkColorHover:e.colorText,breadcrumbLastItemColor:e.colorText,breadcrumbSeparatorMargin:e.marginXS,breadcrumbSeparatorColor:e.colorTextDescription});return[Br(t)]}),gt=e=>{let{children:t}=e;const{getPrefixCls:r}=b.useContext(Ue),s=r("breadcrumb");return b.createElement("li",{className:`${s}-separator`,"aria-hidden":"true"},t===""?t:t||"/")};gt.__ANT_BREADCRUMB_SEPARATOR=!0;const Me=gt;var Re=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r};const bt=e=>{const{prefixCls:t,separator:r="/",children:s,menu:n,overlay:o,dropdownProps:i,href:c}=e,p=Re(e,["prefixCls","separator","children","menu","overlay","dropdownProps","href"]),{getPrefixCls:a}=b.useContext(Ue),d=a("breadcrumb",t),m=y=>{if(n||o){const f=Object.assign({},i);if(n){const h=n||{},{items:E}=h,N=Re(h,["items"]);f.menu=Object.assign(Object.assign({},N),{items:E==null?void 0:E.map((v,B)=>{var{title:I,label:O,path:C}=v,P=Re(v,["title","label","path"]);let A=O??I;return C&&(A=b.createElement("a",{href:`${c}${C}`},A)),Object.assign(Object.assign({},P),{key:B,label:A})})})}else o&&(f.overlay=o);return b.createElement(ut,Object.assign({placement:"bottom"},f),b.createElement("span",{className:`${d}-overlay-link`},y,b.createElement(fr,null)))}return y};let S;return c!==void 0?S=b.createElement("a",Object.assign({className:`${d}-link`,href:c},p),s):S=b.createElement("span",Object.assign({className:`${d}-link`},p),s),S=m(S),s!=null?b.createElement(b.Fragment,null,b.createElement("li",null,S),r&&b.createElement(Me,null,r)):null};bt.__ANT_BREADCRUMB_ITEM=!0;const yt=bt;var Qe=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r};function Lr(e){const{breadcrumbName:t,children:r}=e,s=Qe(e,["breadcrumbName","children"]),n=Object.assign({title:t},s);return r&&(n.menu={items:r.map(o=>{var{breadcrumbName:i}=o,c=Qe(o,["breadcrumbName"]);return Object.assign(Object.assign({},c),{title:i})})}),n}function jr(e,t){return b.useMemo(()=>e||(t?t.map(Lr):null),[e,t])}var Ur=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r};function _r(e,t){if(e.title===void 0)return null;const r=Object.keys(t).join("|");return typeof e.title=="object"?e.title:String(e.title).replace(new RegExp(`:(${r})`,"g"),(s,n)=>t[n]||s)}const Mr=(e,t)=>{if(t===void 0)return t;let r=(t||"").replace(/^\//,"");return Object.keys(e).forEach(s=>{r=r.replace(`:${s}`,e[s])}),r},ke=e=>{const t=e,{prefixCls:r,separator:s="/",style:n,className:o,rootClassName:i,routes:c,items:p,children:a,itemRender:d,params:m={}}=t,S=Ur(t,["prefixCls","separator","style","className","rootClassName","routes","items","children","itemRender","params"]),{getPrefixCls:y,direction:f}=b.useContext(Ue);let h;const E=y("breadcrumb",r),[N,v]=Ir(E),B=jr(p,c),I=d||(C=>_r(C,m));if(B&&B.length>0){const C=[],P=p||c;h=B.map((A,R)=>{const{path:Q,key:q,type:V,menu:oe,overlay:ie,separator:Ee}=A,J=Mr(m,Q);J!==void 0&&C.push(J);const Y=q??R;if(V==="separator")return b.createElement(Me,{key:Y},Ee);const Z={},Ne=R===B.length-1;oe?Z.menu=oe:ie&&(Z.overlay=ie);let{href:le}=A;return C.length&&J!==void 0&&(le=`#/${C.join("/")}`),b.createElement(yt,Object.assign({key:Y},Z,Yt(A,{data:!0,aria:!0}),{href:le,separator:Ne?"":s}),I(A,m,P,C))})}else if(a){const C=Je(a).length;h=Je(a).map((P,A)=>{if(!P)return P;const R=A===C-1;return Zt(P,{separator:R?"":s,key:A})})}const O=er(E,{[`${E}-rtl`]:f==="rtl"},o,i,v);return N(b.createElement("nav",Object.assign({className:O,style:n},S),b.createElement("ol",null,h)))};ke.Item=yt;ke.Separator=Me;const kr=ke,$r=()=>{const{splittedPathname:e}=be(),{data:t,loading:r}=tr({variables:{folderID:e[1]},fetchPolicy:"cache-and-network",skip:!e[0]}),s=b.useMemo(()=>t!=null&&t.getArrayOfRootFoldersName.length?t==null?void 0:t.getArrayOfRootFoldersName.map((n,o)=>({title:u(rr,{to:o===(t==null?void 0:t.getArrayOfRootFoldersName.length)-1?"/":`/folder/${n.ID}`,children:o===(t==null?void 0:t.getArrayOfRootFoldersName.length)-1?"Home":n.name})})):[],[t==null?void 0:t.getArrayOfRootFoldersName]).reverse();return r?u(br.Button,{active:!0,size:"small",className:"ml-4 mt-2 w-32"}):u(kr,{items:s,className:"text-lg ml-4 mt-4"})};function wt(e,t){return function(){return e.apply(t,arguments)}}const{toString:zr}=Object.prototype,{getPrototypeOf:$e}=Object,ye=(e=>t=>{const r=zr.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),M=e=>(e=e.toLowerCase(),t=>ye(t)===e),we=e=>t=>typeof t===e,{isArray:K}=Array,re=we("undefined");function Hr(e){return e!==null&&!re(e)&&e.constructor!==null&&!re(e.constructor)&&U(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const St=M("ArrayBuffer");function qr(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&St(e.buffer),t}const Vr=we("string"),U=we("function"),xt=we("number"),Se=e=>e!==null&&typeof e=="object",Jr=e=>e===!0||e===!1,ae=e=>{if(ye(e)!=="object")return!1;const t=$e(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Wr=M("Date"),Xr=M("File"),Gr=M("Blob"),Kr=M("FileList"),Qr=e=>Se(e)&&U(e.pipe),Yr=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||U(e.append)&&((t=ye(e))==="formdata"||t==="object"&&U(e.toString)&&e.toString()==="[object FormData]"))},Zr=M("URLSearchParams"),en=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ne(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,n;if(typeof e!="object"&&(e=[e]),K(e))for(s=0,n=e.length;s<n;s++)t.call(null,e[s],s,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let c;for(s=0;s<i;s++)c=o[s],t.call(null,e[c],c,e)}}function Ft(e,t){t=t.toLowerCase();const r=Object.keys(e);let s=r.length,n;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const Ot=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Et=e=>!re(e)&&e!==Ot;function ve(){const{caseless:e}=Et(this)&&this||{},t={},r=(s,n)=>{const o=e&&Ft(t,n)||n;ae(t[o])&&ae(s)?t[o]=ve(t[o],s):ae(s)?t[o]=ve({},s):K(s)?t[o]=s.slice():t[o]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&ne(arguments[s],r);return t}const tn=(e,t,r,{allOwnKeys:s}={})=>(ne(t,(n,o)=>{r&&U(n)?e[o]=wt(n,r):e[o]=n},{allOwnKeys:s}),e),rn=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),nn=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},sn=(e,t,r,s)=>{let n,o,i;const c={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),o=n.length;o-- >0;)i=n[o],(!s||s(i,e,t))&&!c[i]&&(t[i]=e[i],c[i]=!0);e=r!==!1&&$e(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},on=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},ln=e=>{if(!e)return null;if(K(e))return e;let t=e.length;if(!xt(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},an=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&$e(Uint8Array)),cn=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=s.next())&&!n.done;){const o=n.value;t.call(e,o[0],o[1])}},un=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},dn=M("HTMLFormElement"),fn=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),Ye=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),pn=M("RegExp"),Nt=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};ne(r,(n,o)=>{t(n,o,e)!==!1&&(s[o]=n)}),Object.defineProperties(e,s)},mn=e=>{Nt(e,(t,r)=>{if(U(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(U(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},hn=(e,t)=>{const r={},s=n=>{n.forEach(o=>{r[o]=!0})};return K(e)?s(e):s(String(e).split(t)),r},gn=()=>{},bn=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Te="abcdefghijklmnopqrstuvwxyz",Ze="0123456789",Dt={DIGIT:Ze,ALPHA:Te,ALPHA_DIGIT:Te+Te.toUpperCase()+Ze},yn=(e=16,t=Dt.ALPHA_DIGIT)=>{let r="";const{length:s}=t;for(;e--;)r+=t[Math.random()*s|0];return r};function wn(e){return!!(e&&U(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Sn=e=>{const t=new Array(10),r=(s,n)=>{if(Se(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[n]=s;const o=K(s)?[]:{};return ne(s,(i,c)=>{const p=r(i,n+1);!re(p)&&(o[c]=p)}),t[n]=void 0,o}}return s};return r(e,0)},xn=M("AsyncFunction"),Fn=e=>e&&(Se(e)||U(e))&&U(e.then)&&U(e.catch),l={isArray:K,isArrayBuffer:St,isBuffer:Hr,isFormData:Yr,isArrayBufferView:qr,isString:Vr,isNumber:xt,isBoolean:Jr,isObject:Se,isPlainObject:ae,isUndefined:re,isDate:Wr,isFile:Xr,isBlob:Gr,isRegExp:pn,isFunction:U,isStream:Qr,isURLSearchParams:Zr,isTypedArray:an,isFileList:Kr,forEach:ne,merge:ve,extend:tn,trim:en,stripBOM:rn,inherits:nn,toFlatObject:sn,kindOf:ye,kindOfTest:M,endsWith:on,toArray:ln,forEachEntry:cn,matchAll:un,isHTMLForm:dn,hasOwnProperty:Ye,hasOwnProp:Ye,reduceDescriptors:Nt,freezeMethods:mn,toObjectSet:hn,toCamelCase:fn,noop:gn,toFiniteNumber:bn,findKey:Ft,global:Ot,isContextDefined:Et,ALPHABET:Dt,generateString:yn,isSpecCompliantForm:wn,toJSONObject:Sn,isAsyncFn:xn,isThenable:Fn};function w(e,t,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n)}l.inherits(w,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:l.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Rt=w.prototype,Tt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Tt[e]={value:e}});Object.defineProperties(w,Tt);Object.defineProperty(Rt,"isAxiosError",{value:!0});w.from=(e,t,r,s,n,o)=>{const i=Object.create(Rt);return l.toFlatObject(e,i,function(p){return p!==Error.prototype},c=>c!=="isAxiosError"),w.call(i,e.message,t,r,s,n),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const On=null;function Be(e){return l.isPlainObject(e)||l.isArray(e)}function At(e){return l.endsWith(e,"[]")?e.slice(0,-2):e}function et(e,t,r){return e?e.concat(t).map(function(n,o){return n=At(n),!r&&o?"["+n+"]":n}).join(r?".":""):t}function En(e){return l.isArray(e)&&!e.some(Be)}const Nn=l.toFlatObject(l,{},null,function(t){return/^is[A-Z]/.test(t)});function xe(e,t,r){if(!l.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=l.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,E){return!l.isUndefined(E[h])});const s=r.metaTokens,n=r.visitor||d,o=r.dots,i=r.indexes,p=(r.Blob||typeof Blob<"u"&&Blob)&&l.isSpecCompliantForm(t);if(!l.isFunction(n))throw new TypeError("visitor must be a function");function a(f){if(f===null)return"";if(l.isDate(f))return f.toISOString();if(!p&&l.isBlob(f))throw new w("Blob is not supported. Use a Buffer instead.");return l.isArrayBuffer(f)||l.isTypedArray(f)?p&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function d(f,h,E){let N=f;if(f&&!E&&typeof f=="object"){if(l.endsWith(h,"{}"))h=s?h:h.slice(0,-2),f=JSON.stringify(f);else if(l.isArray(f)&&En(f)||(l.isFileList(f)||l.endsWith(h,"[]"))&&(N=l.toArray(f)))return h=At(h),N.forEach(function(B,I){!(l.isUndefined(B)||B===null)&&t.append(i===!0?et([h],I,o):i===null?h:h+"[]",a(B))}),!1}return Be(f)?!0:(t.append(et(E,h,o),a(f)),!1)}const m=[],S=Object.assign(Nn,{defaultVisitor:d,convertValue:a,isVisitable:Be});function y(f,h){if(!l.isUndefined(f)){if(m.indexOf(f)!==-1)throw Error("Circular reference detected in "+h.join("."));m.push(f),l.forEach(f,function(N,v){(!(l.isUndefined(N)||N===null)&&n.call(t,N,l.isString(v)?v.trim():v,h,S))===!0&&y(N,h?h.concat(v):[v])}),m.pop()}}if(!l.isObject(e))throw new TypeError("data must be an object");return y(e),t}function tt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function ze(e,t){this._pairs=[],e&&xe(e,this,t)}const Ct=ze.prototype;Ct.append=function(t,r){this._pairs.push([t,r])};Ct.toString=function(t){const r=t?function(s){return t.call(this,s,tt)}:tt;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function Dn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Pt(e,t,r){if(!t)return e;const s=r&&r.encode||Dn,n=r&&r.serialize;let o;if(n?o=n(t,r):o=l.isURLSearchParams(t)?t.toString():new ze(t,r).toString(s),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Rn{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){l.forEach(this.handlers,function(s){s!==null&&t(s)})}}const rt=Rn,vt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Tn=typeof URLSearchParams<"u"?URLSearchParams:ze,An=typeof FormData<"u"?FormData:null,Cn=typeof Blob<"u"?Blob:null,Pn=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),vn=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),_={isBrowser:!0,classes:{URLSearchParams:Tn,FormData:An,Blob:Cn},isStandardBrowserEnv:Pn,isStandardBrowserWebWorkerEnv:vn,protocols:["http","https","file","blob","url","data"]};function Bn(e,t){return xe(e,new _.classes.URLSearchParams,Object.assign({visitor:function(r,s,n,o){return _.isNode&&l.isBuffer(r)?(this.append(s,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function In(e){return l.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Ln(e){const t={},r=Object.keys(e);let s;const n=r.length;let o;for(s=0;s<n;s++)o=r[s],t[o]=e[o];return t}function Bt(e){function t(r,s,n,o){let i=r[o++];const c=Number.isFinite(+i),p=o>=r.length;return i=!i&&l.isArray(n)?n.length:i,p?(l.hasOwnProp(n,i)?n[i]=[n[i],s]:n[i]=s,!c):((!n[i]||!l.isObject(n[i]))&&(n[i]=[]),t(r,s,n[i],o)&&l.isArray(n[i])&&(n[i]=Ln(n[i])),!c)}if(l.isFormData(e)&&l.isFunction(e.entries)){const r={};return l.forEachEntry(e,(s,n)=>{t(In(s),n,r,0)}),r}return null}const jn={"Content-Type":void 0};function Un(e,t,r){if(l.isString(e))try{return(t||JSON.parse)(e),l.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const Fe={transitional:vt,adapter:["xhr","http"],transformRequest:[function(t,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,o=l.isObject(t);if(o&&l.isHTMLForm(t)&&(t=new FormData(t)),l.isFormData(t))return n&&n?JSON.stringify(Bt(t)):t;if(l.isArrayBuffer(t)||l.isBuffer(t)||l.isStream(t)||l.isFile(t)||l.isBlob(t))return t;if(l.isArrayBufferView(t))return t.buffer;if(l.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Bn(t,this.formSerializer).toString();if((c=l.isFileList(t))||s.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return xe(c?{"files[]":t}:t,p&&new p,this.formSerializer)}}return o||n?(r.setContentType("application/json",!1),Un(t)):t}],transformResponse:[function(t){const r=this.transitional||Fe.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(t&&l.isString(t)&&(s&&!this.responseType||n)){const i=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(c){if(i)throw c.name==="SyntaxError"?w.from(c,w.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_.classes.FormData,Blob:_.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};l.forEach(["delete","get","head"],function(t){Fe.headers[t]={}});l.forEach(["post","put","patch"],function(t){Fe.headers[t]=l.merge(jn)});const He=Fe,_n=l.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Mn=e=>{const t={};let r,s,n;return e&&e.split(`
`).forEach(function(i){n=i.indexOf(":"),r=i.substring(0,n).trim().toLowerCase(),s=i.substring(n+1).trim(),!(!r||t[r]&&_n[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},nt=Symbol("internals");function ee(e){return e&&String(e).trim().toLowerCase()}function ce(e){return e===!1||e==null?e:l.isArray(e)?e.map(ce):String(e)}function kn(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const $n=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ae(e,t,r,s,n){if(l.isFunction(s))return s.call(this,t,r);if(n&&(t=r),!!l.isString(t)){if(l.isString(s))return t.indexOf(s)!==-1;if(l.isRegExp(s))return s.test(t)}}function zn(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function Hn(e,t){const r=l.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(n,o,i){return this[s].call(this,t,n,o,i)},configurable:!0})})}class Oe{constructor(t){t&&this.set(t)}set(t,r,s){const n=this;function o(c,p,a){const d=ee(p);if(!d)throw new Error("header name must be a non-empty string");const m=l.findKey(n,d);(!m||n[m]===void 0||a===!0||a===void 0&&n[m]!==!1)&&(n[m||p]=ce(c))}const i=(c,p)=>l.forEach(c,(a,d)=>o(a,d,p));return l.isPlainObject(t)||t instanceof this.constructor?i(t,r):l.isString(t)&&(t=t.trim())&&!$n(t)?i(Mn(t),r):t!=null&&o(r,t,s),this}get(t,r){if(t=ee(t),t){const s=l.findKey(this,t);if(s){const n=this[s];if(!r)return n;if(r===!0)return kn(n);if(l.isFunction(r))return r.call(this,n,s);if(l.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=ee(t),t){const s=l.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||Ae(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let n=!1;function o(i){if(i=ee(i),i){const c=l.findKey(s,i);c&&(!r||Ae(s,s[c],c,r))&&(delete s[c],n=!0)}}return l.isArray(t)?t.forEach(o):o(t),n}clear(t){const r=Object.keys(this);let s=r.length,n=!1;for(;s--;){const o=r[s];(!t||Ae(this,this[o],o,t,!0))&&(delete this[o],n=!0)}return n}normalize(t){const r=this,s={};return l.forEach(this,(n,o)=>{const i=l.findKey(s,o);if(i){r[i]=ce(n),delete r[o];return}const c=t?zn(o):String(o).trim();c!==o&&delete r[o],r[c]=ce(n),s[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return l.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=t&&l.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(n=>s.set(n)),s}static accessor(t){const s=(this[nt]=this[nt]={accessors:{}}).accessors,n=this.prototype;function o(i){const c=ee(i);s[c]||(Hn(n,i),s[c]=!0)}return l.isArray(t)?t.forEach(o):o(t),this}}Oe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);l.freezeMethods(Oe.prototype);l.freezeMethods(Oe);const $=Oe;function Ce(e,t){const r=this||He,s=t||r,n=$.from(s.headers);let o=s.data;return l.forEach(e,function(c){o=c.call(r,o,n.normalize(),t?t.status:void 0)}),n.normalize(),o}function It(e){return!!(e&&e.__CANCEL__)}function se(e,t,r){w.call(this,e??"canceled",w.ERR_CANCELED,t,r),this.name="CanceledError"}l.inherits(se,w,{__CANCEL__:!0});function qn(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new w("Request failed with status code "+r.status,[w.ERR_BAD_REQUEST,w.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const Vn=_.isStandardBrowserEnv?function(){return{write:function(r,s,n,o,i,c){const p=[];p.push(r+"="+encodeURIComponent(s)),l.isNumber(n)&&p.push("expires="+new Date(n).toGMTString()),l.isString(o)&&p.push("path="+o),l.isString(i)&&p.push("domain="+i),c===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(r){const s=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Jn(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Wn(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Lt(e,t){return e&&!Jn(t)?Wn(e,t):t}const Xn=_.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let s;function n(o){let i=o;return t&&(r.setAttribute("href",i),i=r.href),r.setAttribute("href",i),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=n(window.location.href),function(i){const c=l.isString(i)?n(i):i;return c.protocol===s.protocol&&c.host===s.host}}():function(){return function(){return!0}}();function Gn(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Kn(e,t){e=e||10;const r=new Array(e),s=new Array(e);let n=0,o=0,i;return t=t!==void 0?t:1e3,function(p){const a=Date.now(),d=s[o];i||(i=a),r[n]=p,s[n]=a;let m=o,S=0;for(;m!==n;)S+=r[m++],m=m%e;if(n=(n+1)%e,n===o&&(o=(o+1)%e),a-i<t)return;const y=d&&a-d;return y?Math.round(S*1e3/y):void 0}}function st(e,t){let r=0;const s=Kn(50,250);return n=>{const o=n.loaded,i=n.lengthComputable?n.total:void 0,c=o-r,p=s(c),a=o<=i;r=o;const d={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:p||void 0,estimated:p&&i&&a?(i-o)/p:void 0,event:n};d[t?"download":"upload"]=!0,e(d)}}const Qn=typeof XMLHttpRequest<"u",Yn=Qn&&function(e){return new Promise(function(r,s){let n=e.data;const o=$.from(e.headers).normalize(),i=e.responseType;let c;function p(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}l.isFormData(n)&&(_.isStandardBrowserEnv||_.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.setContentType("multipart/form-data;",!1));let a=new XMLHttpRequest;if(e.auth){const y=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(y+":"+f))}const d=Lt(e.baseURL,e.url);a.open(e.method.toUpperCase(),Pt(d,e.params,e.paramsSerializer),!0),a.timeout=e.timeout;function m(){if(!a)return;const y=$.from("getAllResponseHeaders"in a&&a.getAllResponseHeaders()),h={data:!i||i==="text"||i==="json"?a.responseText:a.response,status:a.status,statusText:a.statusText,headers:y,config:e,request:a};qn(function(N){r(N),p()},function(N){s(N),p()},h),a=null}if("onloadend"in a?a.onloadend=m:a.onreadystatechange=function(){!a||a.readyState!==4||a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0)||setTimeout(m)},a.onabort=function(){a&&(s(new w("Request aborted",w.ECONNABORTED,e,a)),a=null)},a.onerror=function(){s(new w("Network Error",w.ERR_NETWORK,e,a)),a=null},a.ontimeout=function(){let f=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const h=e.transitional||vt;e.timeoutErrorMessage&&(f=e.timeoutErrorMessage),s(new w(f,h.clarifyTimeoutError?w.ETIMEDOUT:w.ECONNABORTED,e,a)),a=null},_.isStandardBrowserEnv){const y=(e.withCredentials||Xn(d))&&e.xsrfCookieName&&Vn.read(e.xsrfCookieName);y&&o.set(e.xsrfHeaderName,y)}n===void 0&&o.setContentType(null),"setRequestHeader"in a&&l.forEach(o.toJSON(),function(f,h){a.setRequestHeader(h,f)}),l.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),i&&i!=="json"&&(a.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&a.addEventListener("progress",st(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",st(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=y=>{a&&(s(!y||y.type?new se(null,e,a):y),a.abort(),a=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const S=Gn(d);if(S&&_.protocols.indexOf(S)===-1){s(new w("Unsupported protocol "+S+":",w.ERR_BAD_REQUEST,e));return}a.send(n||null)})},ue={http:On,xhr:Yn};l.forEach(ue,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Zn={getAdapter:e=>{e=l.isArray(e)?e:[e];const{length:t}=e;let r,s;for(let n=0;n<t&&(r=e[n],!(s=l.isString(r)?ue[r.toLowerCase()]:r));n++);if(!s)throw s===!1?new w(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(l.hasOwnProp(ue,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!l.isFunction(s))throw new TypeError("adapter is not a function");return s},adapters:ue};function Pe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new se(null,e)}function ot(e){return Pe(e),e.headers=$.from(e.headers),e.data=Ce.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Zn.getAdapter(e.adapter||He.adapter)(e).then(function(s){return Pe(e),s.data=Ce.call(e,e.transformResponse,s),s.headers=$.from(s.headers),s},function(s){return It(s)||(Pe(e),s&&s.response&&(s.response.data=Ce.call(e,e.transformResponse,s.response),s.response.headers=$.from(s.response.headers))),Promise.reject(s)})}const it=e=>e instanceof $?e.toJSON():e;function G(e,t){t=t||{};const r={};function s(a,d,m){return l.isPlainObject(a)&&l.isPlainObject(d)?l.merge.call({caseless:m},a,d):l.isPlainObject(d)?l.merge({},d):l.isArray(d)?d.slice():d}function n(a,d,m){if(l.isUndefined(d)){if(!l.isUndefined(a))return s(void 0,a,m)}else return s(a,d,m)}function o(a,d){if(!l.isUndefined(d))return s(void 0,d)}function i(a,d){if(l.isUndefined(d)){if(!l.isUndefined(a))return s(void 0,a)}else return s(void 0,d)}function c(a,d,m){if(m in t)return s(a,d);if(m in e)return s(void 0,a)}const p={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:c,headers:(a,d)=>n(it(a),it(d),!0)};return l.forEach(Object.keys(Object.assign({},e,t)),function(d){const m=p[d]||n,S=m(e[d],t[d],d);l.isUndefined(S)&&m!==c||(r[d]=S)}),r}const jt="1.4.0",qe={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{qe[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const lt={};qe.transitional=function(t,r,s){function n(o,i){return"[Axios v"+jt+"] Transitional option '"+o+"'"+i+(s?". "+s:"")}return(o,i,c)=>{if(t===!1)throw new w(n(i," has been removed"+(r?" in "+r:"")),w.ERR_DEPRECATED);return r&&!lt[i]&&(lt[i]=!0,console.warn(n(i," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,i,c):!0}};function es(e,t,r){if(typeof e!="object")throw new w("options must be an object",w.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const o=s[n],i=t[o];if(i){const c=e[o],p=c===void 0||i(c,o,e);if(p!==!0)throw new w("option "+o+" must be "+p,w.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new w("Unknown option "+o,w.ERR_BAD_OPTION)}}const Ie={assertOptions:es,validators:qe},H=Ie.validators;class ge{constructor(t){this.defaults=t,this.interceptors={request:new rt,response:new rt}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=G(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:o}=r;s!==void 0&&Ie.assertOptions(s,{silentJSONParsing:H.transitional(H.boolean),forcedJSONParsing:H.transitional(H.boolean),clarifyTimeoutError:H.transitional(H.boolean)},!1),n!=null&&(l.isFunction(n)?r.paramsSerializer={serialize:n}:Ie.assertOptions(n,{encode:H.function,serialize:H.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i;i=o&&l.merge(o.common,o[r.method]),i&&l.forEach(["delete","get","head","post","put","patch","common"],f=>{delete o[f]}),r.headers=$.concat(i,o);const c=[];let p=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(p=p&&h.synchronous,c.unshift(h.fulfilled,h.rejected))});const a=[];this.interceptors.response.forEach(function(h){a.push(h.fulfilled,h.rejected)});let d,m=0,S;if(!p){const f=[ot.bind(this),void 0];for(f.unshift.apply(f,c),f.push.apply(f,a),S=f.length,d=Promise.resolve(r);m<S;)d=d.then(f[m++],f[m++]);return d}S=c.length;let y=r;for(m=0;m<S;){const f=c[m++],h=c[m++];try{y=f(y)}catch(E){h.call(this,E);break}}try{d=ot.call(this,y)}catch(f){return Promise.reject(f)}for(m=0,S=a.length;m<S;)d=d.then(a[m++],a[m++]);return d}getUri(t){t=G(this.defaults,t);const r=Lt(t.baseURL,t.url);return Pt(r,t.params,t.paramsSerializer)}}l.forEach(["delete","get","head","options"],function(t){ge.prototype[t]=function(r,s){return this.request(G(s||{},{method:t,url:r,data:(s||{}).data}))}});l.forEach(["post","put","patch"],function(t){function r(s){return function(o,i,c){return this.request(G(c||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}ge.prototype[t]=r(),ge.prototype[t+"Form"]=r(!0)});const de=ge;class Ve{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const s=this;this.promise.then(n=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](n);s._listeners=null}),this.promise.then=n=>{let o;const i=new Promise(c=>{s.subscribe(c),o=c}).then(n);return i.cancel=function(){s.unsubscribe(o)},i},t(function(o,i,c){s.reason||(s.reason=new se(o,i,c),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new Ve(function(n){t=n}),cancel:t}}}const ts=Ve;function rs(e){return function(r){return e.apply(null,r)}}function ns(e){return l.isObject(e)&&e.isAxiosError===!0}const Le={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Le).forEach(([e,t])=>{Le[t]=e});const ss=Le;function Ut(e){const t=new de(e),r=wt(de.prototype.request,t);return l.extend(r,de.prototype,t,{allOwnKeys:!0}),l.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return Ut(G(e,n))},r}const D=Ut(He);D.Axios=de;D.CanceledError=se;D.CancelToken=ts;D.isCancel=It;D.VERSION=jt;D.toFormData=xe;D.AxiosError=w;D.Cancel=D.CanceledError;D.all=function(t){return Promise.all(t)};D.spread=rs;D.isAxiosError=ns;D.mergeConfig=G;D.AxiosHeaders=$;D.formToJSON=e=>Bt(l.isHTMLForm(e)?new FormData(e):e);D.HttpStatusCode=ss;D.default=D;const os=D,{getLocalStorage:is}=nr(),_t=os.create({baseURL:"https://storageapp.cloud/api",headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});_t.interceptors.request.use(e=>{const t=is("token");return t&&e.headers&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));const Mt=_t,at=async(e,t)=>await Mt.post(`/files/upload?folderID=${t}`,e),ls=async(e,t)=>await Mt.post(`/folders/upload?folderID=${t}`,e),Fs=()=>{const{params:e,navigate:t}=be(),{rootFolderID:r,maxStorage:s,storageUsed:n}=sr(),{showErrorNotification:o,showSuccessNotification:i}=or(),[c,p]=b.useState(!1),[a,d]=b.useState(null),[m,S]=b.useState(!1),[y,f]=b.useState(!1),h=b.useRef(null),E=b.useRef(null),N=b.useRef(null),[v,{loading:B}]=ir({onCompleted:()=>{p(!1),P()}}),I=b.useMemo(()=>e.folderID||r||"",[e.folderID,r]),{data:O,loading:C,refetch:P,error:A}=lr({variables:{folderID:I},skip:!I,fetchPolicy:"cache-and-network"}),{data:R,loading:Q,refetch:q,error:V}=ar({variables:{folderID:I},skip:!I,fetchPolicy:"cache-and-network"});b.useEffect(()=>{var g,T,k,j,L,z;(((k=(T=(g=A==null?void 0:A.graphQLErrors[0])==null?void 0:g.extensions)==null?void 0:T.exception)==null?void 0:k.status)===403||((z=(L=(j=V==null?void 0:V.graphQLErrors[0])==null?void 0:j.extensions)==null?void 0:L.exception)==null?void 0:z.status)===403)&&!Q&&!C&&S(!0)},[A,V,Q,C]);const oe=g=>{t(`/folder/${g}`)},ie=g=>{if(a&&a.ID===(g==null?void 0:g.ID)){oe(String(a.ID));return}if(!g){d(null);return}d({...g,type:"folder"})},Ee=g=>{if(!(a&&a.ID===(g==null?void 0:g.ID))){if(!g){d(null);return}d({...g,type:"file"})}},J=async g=>{var L,z;f(!0);const T=(z=(L=g==null?void 0:g.target)==null?void 0:L.files)==null?void 0:z[0];if(!We(Xe(Number(s)),Number(n),(T==null?void 0:T.size)||0)){o("Not enough space left"),f(!1);return}console.log(T);const j=new FormData;j.append("file",T);try{await at(j,I),P(),q(),i("File uploaded successfully")}catch(qt){o(qt.message)}finally{f(!1)}},Y=async g=>{var j;f(!0);const T=(j=g==null?void 0:g.target)==null?void 0:j.files;if(!We(Xe(Number(s)),Number(n),Number(dr(T)))){o("Not enough space left"),f(!1);return}try{const L=new FormData;for(const z of T)console.log(z),L.append("files",z);await ls(L,I),P(),i("Folder uploaded successfully")}catch(L){o(L.message)}finally{f(!1)}},Z=async g=>{var T,k;try{const j=(k=(T=g==null?void 0:g.dataTransfer)==null?void 0:T.files)==null?void 0:k[0],L=new FormData;L.append("file",j),await at(L,I),P(),q(),i("File uploaded successfully")}catch(j){o(j.message)}},Ne=()=>{var g;(g=E.current)==null||g.click()};b.useEffect(()=>{y?Ke.loading({content:"Uploading files...",key:"uploading",duration:0}):Ke.destroy()},[y]);const le=b.useMemo(()=>[{label:"New Folder",key:"0",icon:u(Or,{}),onClick:()=>{p(!0)}},{type:"divider"},{label:"Upload File",key:"1",icon:u(Ar,{}),onClick:()=>{Ne()}},{label:"Upload Folder",key:"3",icon:u(Dr,{}),onClick:()=>{var g;(g=N.current)==null||g.click()}}],[]),kt=async()=>{var g,T;try{await v({variables:{input:{name:((T=(g=h.current)==null?void 0:g.input)==null?void 0:T.value)||"",rootFolderID:e.folderID||r||""}}}),i("Folder created successfully")}catch(k){o(k.message)}},$t=()=>{p(!1)},zt=()=>{S(!1),t("/")},Ht=b.useMemo(()=>(!(O!=null&&O.getFoldersOfFolder.length)||(O==null?void 0:O.getFoldersOfFolder.every(g=>g.isTrash)))&&(!(R!=null&&R.getFilesByFolder.length)||(R==null?void 0:R.getFilesByFolder.every(g=>g.isTrash))),[O,R]);return C||Q?u("div",{className:"flex justify-center items-center h-full",children:u(_e,{size:"large"})}):x(fe,{children:[x("div",{className:"flex flex-col pt-5 h-full",children:[u("div",{className:"ml-4",children:u(ut,{menu:{items:le},trigger:["click"],children:x(te,{size:"large",children:[u(Sr,{}),"Add"]})})}),u($r,{}),(()=>Ht?x(fe,{children:[x(Pr,{handleDropFile:Z,className:"flex justify-center items-center flex-col mt-28 h-full",children:[u(yr,{icon:wr,style:{color:"#256fef"},className:"text-7xl"}),u(F.Text,{className:"font-bold",children:"Drag file here or use the Add button"})]}),u("input",{type:"file",className:"hidden",ref:E,onChange:J}),u("input",{type:"file",className:"hidden",ref:N,multiple:!0,directory:"",webkitdirectory:"",onChange:Y})]}):x(cr,{gutter:[16,16],children:[x(De,{span:a?18:void 0,children:[!!(O!=null&&O.getFoldersOfFolder.length)&&!(O!=null&&O.getFoldersOfFolder.every(g=>g.isTrash))&&u(F.Text,{className:"inline-block p-4 font-semibold",children:"Folders"}),u(gr,{folders:(O==null?void 0:O.getFoldersOfFolder)||[],handleClickFolder:ie,selectedItem:a,refetch:P}),!!(R!=null&&R.getFilesByFolder.length)&&u(F.Text,{className:"inline-block p-4 font-semibold",children:"Files"}),u(mr,{files:(R==null?void 0:R.getFilesByFolder)||[],handleClickItem:Ee,selectedItem:a,isFilterTrash:!1,refetch:q})]}),a&&a.type==="file"&&u(De,{span:6,children:u(Cr,{fileID:a==null?void 0:a.ID})}),a&&a.type==="folder"&&u(De,{span:6,children:u(vr,{folderID:a==null?void 0:a.ID})})]}))()]}),c&&u(Ge,{title:"Create Folder",open:c,onOk:kt,confirmLoading:B,onCancel:$t,children:u(ur,{size:"large",placeholder:"Enter folder name",allowClear:!0,ref:h})}),m&&u(Ge,{title:"Access Denied",open:m,onOk:zt,cancelButtonProps:{style:{display:"none"}},children:u(F.Text,{children:"You don't have access to this folder"})}),u("input",{type:"file",className:"hidden",ref:E,onChange:J}),u("input",{type:"file",className:"hidden",ref:N,multiple:!0,directory:"",webkitdirectory:"",onChange:Y})]})};export{Fs as FolderPage};
